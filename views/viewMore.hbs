<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ViewMore</title>
    
    {{!-- bootstrap  --}}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

     {{!--  fontAwesome cdn Import --}}
       <script src="https://kit.fontawesome.com/8dc03a4776.js" crossorigin="anonymous"></script>
    {{!--  block ends here --}}
    <link rel="stylesheet" href="CSS/app.css">
</head>
<body>
    {{>header}}
    <div id="singleCompany" class="container d-flex justify-content-center align-items-center py-4 my-2" style="height: 100vh ;">
     
    </div>

    <script>
   async function getterSingle(){

         var fullUrl = window.location.href;
          
         var strippedUrl = fullUrl.replace(/^[a-z]{4,5}\:\/{2}[a-z]{1,}\:[0-9]{1,4}.(.*)/, '$1');
        
         console.log(strippedUrl.replace(/[^\d.-]/g, ''));
         const curr_id = strippedUrl.replace(/[^\d.-]/g, '');
         var URL = `http://localhost:7000/api/:${curr_id}`; 
          fetch(URL, 
          { method: 'POST',headers: {
            'Content-type': 'application/json; charset=UTF-8',
           },
            body: JSON.stringify({
                   "id": 17,
                   "stipend": 7192,
                   "email": "zo@email.com",
                   "companyName": "UGI Corporation",
                   "address": "1997 Hibmu Jct",
                   "jobType": "Research Specialist",
                   "description": "Cufti lo opfifep ajruh su mucawzi fot vokok wevajca go oza keuzfa siswelci gelip caemno sitrajwed imzugif soj. Zudcirpom fi razfebmab oscifol fivrub nuhenbi hulo ar eziuhun evorew boohjok bu atimazip popfavget devcucof tuwisjun viewo busme. Gos va calak ca ga mo ajgicen jimowa jiwucwuk tiewu paki pobek boh mi goltil zoele vopov. Muk dukig tozuhjod ha olnead hec jamha niik sisoh va sase mo afehoita nicirip nuno ca do gi. Gow folda ad coba zaso bef me sahkakki duv id du mi sunpothu booku jifo lemwi moroppi.",
                   "duration": 6,
                   "seats": 2,
                   "jobCategory": "Office"
           })
        })
        .then((response) => response.json())
        .then((data)=>{
                  var singleCompany = document.getElementById('singleCompany');
                  singleCompany.innerHTML = '';
                  var content = `<div class="container border border-secondary border-opacity-50 bg-white shadow-lg" style="min-height:60vh;">
                                       <div class="container d-flex justify-content-center align-items-center my-1 px-2 py-2">
                                            <span class="h4 font-weight-bold" >
                                                 ${data.jobType}
                                                 Job in Multiple locations at
                                                 ${data.companyName}
                                            </span>
                                       </div>
                                        <div class="container d-flex flex-row justify-content-between align-items-center my-1 py-2 px-2">
                                    
                                               <div class="h5 font-weight-bold " >
                                                  <span class="text-primary" >
                                                       Role : 
                                                  </span>
                                                 <span class="text-info" >
                                                    ${data.jobType}
                                                 </span>
                                               
                                              </div>
                                            <div class="h5" >
                                                <span class="text-primary" >
                                                Salary : 
                                                </span>
                                                <span class="text-info" >
                                                    ${parseInt( data.stipend / 10, 10) * 10}Rs
                                                   Monthly
                                                </span>
                                            </div>
                                       </div>
                                        <div class="container d-flex flex-column my-1 px-2 py-2">
                                            <span class="h5 font-weight-bold text-primary" >
                                                 Job Description : 
                                            </span>
                                            <span class="text-secondary">
                                                 ${data.description}
                                            </span>
                                       </div>
                                       <div class="container d-flex my-1 px-2 py-2 justify-content-between align-items-center border-bottom border-secondary border-opacity-50">
                                           <div class="d-flex flex-column">
                                               <span class="h5 font-weight-bold text-primary" >
                                                 Job Type : 
                                            </span>
                                            <span class="text-info">
                                                 ${data.jobCategory}
                                            </span>
                                           </div>

                                           <div class="d-flex flex-column text-end">
                                               <span class="h5 font-weight-bold text-primary" >
                                                 Job Duration : 
                                            </span>
                                            <span class="text-info">
                                                 Min.
                                                 ${data.duration}
                                                 Months
                                            </span>
                                           </div>
                                       </div>
                                       <div class="container d-flex my-1 px-2 py-2 justify-content-between align-items-center border-bottom border-secondary border-opacity-50">
                                        <div class="d-flex flex-column">
                                            <span class="h5 font-weight-bold text-primary" >
                                                 Number of Seats : 
                                            </span>
                                            <span class="text-info">
                                                 ${data.seats}
                                                 Seats
                                            </span>
                                       </div>
                                        <div class="d-flex flex-column text-end">
                                            <span class="h5 font-weight-bold text-primary" >
                                                 No of Applicants : 
                                            </span>
                                            <span class="text-info">
                                                 0 Applicants
                                            </span>
                                       </div>
                                       </div>

                                        <div class="container d-flex flex-row my-1 px-2 py-2 justify-content-between align-items-center">
                                           <div class="col-sm-6 d-flex flex-column">
                                              <span class="h5 font-weight-bold text-primary" >
                                                 Company Info : 
                                              </span>
                                              <span class="text-info">
                                                 ${data.email}
                                                 Seats
                                              </span>
                                           </div>
                                           <div class="col-sm-6 d-flex justify-content-end align-items-center my-1">
                                                <a href="http://localhost:7000/apply:${curr_id}" class="col-sm-6 btn btn-primary rounded-0 text-decoration-none text-white">
                                                     Apply
                                                </a>
                                       </div>
                                           
                                       </div>

                                       
                                 <div>`
                  singleCompany.innerHTML = content;
                })
        .catch((error)=>{
            console.error('Error Gathering Data',error);
         })
   }
   getterSingle();
</script>
</body>

</html>